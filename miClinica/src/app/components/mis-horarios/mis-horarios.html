<div class="horarios-container">
  <mat-card class="editor-card">
    <mat-card-header>
      <mat-card-title>Gestionar Disponibilidad</mat-card-title>
      <mat-card-subtitle>Define tus días y horas de atención</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="guardarHorario()" class="horario-form">
        
        <mat-form-field appearance="outline">
          <mat-label>Especialidad</mat-label>
          <mat-select formControlName="especialidad">
            <mat-option *ngFor="let esp of especialidadesUsuario" [value]="esp">
              {{ esp }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Día de la semana</mat-label>
          <mat-select formControlName="dia">
            <mat-option *ngFor="let dia of diasSemana" [value]="dia">{{ dia }}</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="horas-row">
          <mat-form-field appearance="outline">
            <mat-label>Desde (Hora)</mat-label>
            <input matInput type="number" formControlName="horaInicio" min="8" max="19">
            <span matSuffix>hs</span>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Hasta (Hora)</mat-label>
            <input matInput type="number" formControlName="horaFin" min="9" max="20">
            <span matSuffix>hs</span>
          </mat-form-field>
        </div>

        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
          <mat-icon>add</mat-icon> AGREGAR HORARIO
        </button>

      </form>
    </mat-card-content>
  </mat-card>

  <!-- LISTA DE HORARIOS GUARDADOS -->
  <div class="lista-horarios">
    <h3>Mis Horarios Activos</h3>
    
    <div class="empty-state" *ngIf="horariosGuardados.length === 0">
      <p>No tienes horarios cargados. Los pacientes no podrán ver turnos.</p>
    </div>

    <mat-chip-set class="horarios-grid">
      <mat-chip *ngFor="let h of horariosGuardados" (removed)="borrarHorario(h.id!)">
        <span class="chip-content">
          <strong>{{ h.dia }}</strong> 
          {{ h.hora_inicio }}hs - {{ h.hora_fin }}hs 
          <small>({{ h.especialidad }})</small>
        </span>
        <button matChipRemove>
          <mat-icon>cancel</mat-icon>
        </button>
      </mat-chip>
    </mat-chip-set>
  </div>
</div>
